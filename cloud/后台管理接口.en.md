---

### 1、API Documentation
● Note: All interface requests must carry signature-related parameters. The signature calculation method is as follows: [Signature Calculation Method](http://note.youdao.com/groupshare/?token=1E676FB4DEF14F009BBFB67A216F6232&gid=108651055)


#### 1.1、Device Information Query
##### 1.1.1. Interface Description
> Provide device information query capabilities for customer service scenarios.

> [!WARNING]
> Interface rate limit: 10/s

```
Request Address:
post
https://domain/openapi/custCloud/oss/devInfo
```

##### 1.1.2. Request Parameters
Parameter          |Type   |Required|Description
------------------|-------|--------|---------------------  
action        |string | Yes |Interface name for the operation, here it is **devInfo**
appId         |string |Yes  |Assigned by Gwell (request from relevant personnel)
appToken      |string |Yes  |Assigned by Gwell (request from relevant personnel)
sn            |string |No  |Device sn, choose either sn or devId
devId         |string |No  |Gwell Cloud device id, choose either sn or devId
accessId      |string |Yes  |Gwell Cloud user id

**Request Example**
```
curl --location --request POST 'http://localhost:12042/openapi/custCloud/oss/devInfo' \
--header 'X-IotVideo-AccessID: 0000175a370efbbe852dc1cd1b0b877e' \
--header 'X-IotVideo-Nonce: 1212' \
--header 'X-IotVideo-Timestamp: 1696757960' \
--header 'X-IotVideo-Signature: e55Cg870djBQZA6ts2s+B1Dlq0g=' \
--header 'Content-Type: application/json' \
--header 'Host: localhost:12042' \
--data-raw '{
    "appId":"0000175a370xxxxxxxc1cd1b0b877e",
    "appToken":"a844e8320c75a5cxxxxxxxxxxxxxxxxxce9e347xxxxx041a05a7053",
    "sn":"876xxxxxxx347",
    "devId":"",
    "accessId":"-922337198xxxxx56044"
}'
```

##### 1.1.3. Response Parameters
Parameter          |Type   |Description
------------------|-------|---------------------  
code          |integer|Return error code
msg           |string |Return prompt message
data          |Model |

**data structure**：
Parameter Name       |Type    |Required|Description
---------------------|--------|--------|----
deviceInfo         |string  | Yes |Device information
storageInfo         |string  | Yes |Cloud storage information
flowInfo         |string  | Yes |Flow information


**deviceInfo structure**：
Parameter Name       |Type    |Required|Description
---------------------|--------|--------|----
deviceId         |string  | Yes |Gwell device id
ownerId         |int64  | Yes |Gwell device owner id, 0: device is not currently bound
online         |int64  | Yes |Online status, 0: offline, 1: online
onlineUpdateTime         |int64  | Yes |Last update time of online status
deviceType         |string  | Yes |Device type
battery         |string  | Yes |Battery level
signal         |int64  | Yes |Signal quality
rssi         |int64  | Yes |Actual signal value of the device: current signal value using WiFi or 4G card
firmwareVer         |string  | Yes |Firmware version
powerMode         |string  | Yes |Power supply mode 0--device without battery; 1--device with battery, currently powered by battery; 2--device with battery, currently powered by external power
powerCharging         |string  | Yes |Charging status 0: not charging; 1: charging; 2: charging at low voltage; 3: charging at high voltage
bindTime         |int64  | Yes |Binding time
* If the device is offline for a long time (several months), the device's online information will not be available: online, onlineUpdateTime, battery, signal, rssi, powerMode, powerCharging



**storageInfo structure**：
Parameter Name       |Type    |Required|Description
---------------------|--------|--------|----
orderId         |string  | Yes |Latest order number
pkgType         |int64  | Yes |Package type, 0: full-time, 1: event
startTime       |int64  | Yes |Service start time
endTime         |int64  | Yes |Service end time
srvStatus       |int64  | Yes |Service status, 2: service in use, 5: expired and closed service
storageDays         |int64  | Yes |Storage days
subStatus         |bool  | Yes |Subscription status, true: subscribing
subTime         |int64  | Yes |Subscription time, 0: not subscribed
withholdTime         |int64  | Yes |Latest deduction time, 0: no deduction

**flowInfo structure**：
Parameter Name       |Type    |Required|Description
---------------------|--------|--------|----
simId         |string  | Yes |Card number
orderId         |int64  | Yes |Latest order number
startTime       |int64  | Yes |Service start time
endTime         |int64  | Yes |Service end time
srvStatus       |int64  | Yes |Service status, 0: expired, 1: active
cardProvider         |string  | Yes |Card provider
subStatus         |bool  | Yes |Subscription status, true: subscribing
subTime         |int64  | Yes |Subscription time, 0: not subscribed
withholdTime         |int64  | Yes |Latest deduction time, 0: no deduction

##### 1.1.4. Return Result
```
{
    "code": 0,
    "data": {
        "deviceInfo": {
            "deviceId": "51xxxx15988",
            "ownerId": -922337198xxxxx56044,
            "online": 1,
            "deviceType": "",
            "battery": "",
            "connectInfo": "",
            "rssi": -101,
            "firmwareVer": "43.0.0.43",
            "powerMode": "",
            "powerCharging": "",
            "bindTime": 1763802936
        },
        "storageInfo": {
            "orderId": "xxx",
            "pkgType": 5,
            "startTime": 0,
            "endTime": 0,
            "srvStatus": 2,
            "storageDays": 7,
            "subStatus": true,
            "subTime": 1763802936,
            "withholdTime": 1763802936
        },
        "flowInfo": {
            "simId": "xx",
            "orderId": "xxx",
            "startTime": 1763802936,
            "endTime": 3972791736,
            "srvStatus": 1,
            "cardProvider": "中国电信",
            "subStatus": false,
            "subTime": 1763802936,
            "withholdTime": 1763802936
        }
    },
    "msg": "ok",
    "requestId": "6029eee2-02a9-4431-99eb-038aefe387ad"
}
```

##### 1.1.5. Error Codes
Error Code |Error Description                          
-----------|---------------------------------
0      |Success                           
10007  |Signature verification failed 


#### 1.2、Device List Interface
##### 1.2.1. Interface Description
> Provide user device list query capabilities for customer service scenarios.

> [!WARNING]
> Interface rate limit: 10/s
 
```
Request Address:
post
https://domain/openapi/custCloud/oss/devList
```

##### 1.2.2. Request Parameters
Parameter          |Type   |Required|Description
------------------|-------|--------|---------------------  
action        |string | Yes |Interface name for the operation, here it is **devList**
appId         |string |Yes  |Assigned by Gwell (request from relevant personnel)
appToken      |string |Yes  |Assigned by Gwell (request from relevant personnel)
accessId      |string |Yes  |Gwell Cloud user id

**Request Example**
```
curl --location --request POST 'http://localhost:12042/openapi/custCloud/oss/devList' \
--header 'X-IotVideo-AccessID: 0000175a370efbbe852dc1cd1b0b877e' \
--header 'X-IotVideo-Nonce: 1212' \
--header 'X-IotVideo-Timestamp: 1696757960' \
--header 'X-IotVideo-Signature: e55Cg870djBQZA6ts2s+B1Dlq0g=' \
--header 'Content-Type: application/json' \
--header 'Host: localhost:12042' \
--data-raw '{
    "appId":"0000175a370xxxxxxxc1cd1b0b877e",
    "appToken":"a844e8320c75a5cxxxxxxxxxxxxxxxxxce9e347xxxxx041a05a7053",
    "accessId":"-922337198xxxxx56044"
}'
```

##### 1.2.3. Response Parameters
Parameter          |Type   |Description
------------------|-------|---------------------  
code          |integer|Return error code
msg           |string |Return prompt message
data          |model |

**data structure**：
Parameter Name       |Type    |Required|Description
---------------------|--------|--------|----
deviceList         |List<DeviceVO>  | Yes |Device list

**DeviceVO structure**：
Parameter Name       |Type    |Required|Description
---------------------|--------|--------|----
devId         |int64  | Yes |Gwell device id
relation         |int64  | Yes |1: owner, 2: visitor
vss         |VssVO  | Yes |Cloud storage information
fourCard         |FourCardVO  | Yes |Flow information


**VssVO structure**：
Parameter Name       |Type    |Required|Description
---------------------|--------|--------|----
vssExpireTime         |int64  | Yes |Cloud storage service expiration time
vssRenew         |int64  | Yes |Cloud storage service auto-renewal status, 0: not renewing, 1: renewing
storageDuration         |int64  | Yes |Storage days

**FourCardVO structure**：
Parameter Name       |Type    |Required|Description
---------------------|--------|--------|----
fgExpireTime         |int64  | Yes |4G flow service expiration time
fgRenew         |int64  | Yes |Flow service auto-renewal status, 0: not renewing, 1: renewing
surplusFlow         |int64  | Yes |Remaining flow, unit MB, only valid for flow package plans
totalFlow         |int64  | Yes |Total flow (unit MB), only valid for flow package plans
useFlow         |int64  | Yes |Used flow (unit MB), only valid for flow package plans

##### 1.2.4. Return Result
```
{
    "code": 0,
    "data": {
        "deviceList": [
            {
                "devId": 3435XXxxx3944,
                "relation": 1,
                "vss": {
                    "vssExpireTime": 0,
                    "vssRenew": 0,
                    "type": 0,
                    "storageDuration": 0
                },
                "fourCard": {
                    "fgExpireTime": 0,
                    "fgRenew": 0,
                    "surplusFlow": 0,
                    "totalFlow": 0,
                    "useFlow": 0
                }
            }
        ]
    },
    "msg": "ok",
    "requestId": "91245e99-b5fa-4e19-a7ae-0d5a99ee406c"
}
```

##### 1.2.5. Error Codes
Error Code |Error Description                          
-----------|---------------------------------
0      |Success                           
10007  |Signature verification failed 




